
; CBIOS FOR TELEVIDEO SYSTEM TS-802H

;	COPYRIGHT (C) 1981,1982,1983
;	TELEVIDEO SYSTEMS INC.
;	1170 MORSE AVENUE 
;	SUNNYVALE, CA 94086
;	(408) 745-7760

; 	VERSION	V2.4 REV G (RELEASE)

;	9-25-81			SUNG WOO LEE
;	- ADOPTED TS-806 CBIOS FOR TS-802H SYSTEM V1.0
;	  WITH ONLY PORT ADDRESS MODIFICATION

;	10-25-81		SUNG WOO LEE
;	- ENHANCEMENT FOR TS-802H V2.0 REV. A
;	  -- DRIVE DOOR OPEN MESSAGE
;	  -- DETAILED ERROR MESSAGE
;	  -- DISK DRIVE MOTOR & LIGHT OFF WHEN UNUSED
;	  -- ADDED PRINTER INTERFACE WITH ETX/ACK PROTOCOL
;	  -- USED MICROSOFT M80 WITH INCLUDE INSTRUCTION
;	     TO ASSEMBLE FOUR MODULES

;	12-22-81		SUNG WOO LEE
;	- REMOVED CTC INITIALIZATION ROUTINE NOT TO DISTURB THE
;	  BAUD RATE SET UP IN PROM CODE FOR SERIAL PRINTER BY
;	  READING THE SW2-1/2/3
;	- DEVIDED HARD DISK INTO 3 LOGICAL DRIVE.
;	  -- CASE 1 (BOOT FROM FLOPPY DISK)
;		A: FLOPPY DISK DRIVE
;		B: SIMULATED FLOPPY DISK DRIVE(INNERMOST HARD DISK)
;		   SAME BLOCK SIZE ,DIRECTORY AND CAPACITY AS FLOPPY
;		C: MIDDLE PART OF HARD DISK
;		D: OUTERMOST PART OF HARD DISK
;			C: AND D: ARE SAME SIZE
;	- RESTORE HARD DISK HEAD AT THE TIME OF COLD BOOT
;	- SEPARATED IOBYTE INITIALIZATION ROUTINE FROM TINIT ROUTINE
;	  AND MOVED TO THE LOCATION RIGHT AFTER THE CBIOS JUMP INSTRUCTION
;	  ALONG WITH LOGICAL TO PHYSICAL DRIVE TRANSLATION TABLE FOR
;	  THE PURPOSE OF HAVING FIXED LOCATION EVEN AFTER THE CBIOS
;	  MODIFICATION
;	- SAVE LAST HARD DISK COMMAND BEFORE THE RESTORING IN DISK
;	  INITIALIZATION ROUTINE
	PAGE	
;	8-16-82			CHUNG MIN CHOI 
;	- OPTIMIZATION FOR TS-802H V2.1 REV B
;	  -- REMOVE PARALLEL PORT
;	  -- REMOVE AUTO COMMAND FEATURE
;	  -- REFORMAT ERROR MESSAGE TO DISTINGUISH BETWEEN
;	     BDOS AND BIOS ERROR
;	  -- OPTIMIZE DISK BLOCKING/DEBLOCKING SCHEME
;	  -- UPGRADE IOBYTE TO SUPPORT MODEM PORT FOR EACH
;	     LOGICAL ASSIGNMENT
;	  -- RESTRUCTURE PROGRAM TO STANDARDIZE BETWEEN
;	     TS-802 SERIES SYSTEM
;	  -- ADD AN ABILITY TO RECOVER FROM DISK SELECT ERROR 
;	     WHEN LOGGING INTO NON-SUPPORTED DRIVE 
;	- INSTALL STANDARDIZED TIME AND DATE ROUITNE
;
;	10-22-82		CHUNG MIN CHOI
;	- MODIFICATION FOR TS-802H V2.1 REV C
;	  -- ADD A SCHEME SUCH THAT CONTROL-C DOES NOT REVERT
;	     THE SYSTEM TO CP/M USER 0 UNLESS ILLEGAL DRIVE
;	     OR A DRIVE WITH DOOR OPENED IS ACCESSED
;
;       3-31-83			CHUNG MIN CHOI
;	- MODIFICATION FOR TS-802H V2.3 REV E
;	  -- USED SWITCH 4 TO IDENTIFY BETWEEN HARD DISK CONFI-
;	     GURATION, 10 OR 20 MEGABYTE
;         -- ADD DISK PARAMETER BLOCK FOR 802H/20 CONFIGURATION
;
;       06-22-83                CHUNG MIN CHOI
;	- INCREASE DELAY TIME FOR FLOPPY DISK DRIVE MOTOR TO
;	  GET HEAD LOAD SETTLEMENT FROM 250MS TO 540MS
  
;	TeleVideo Systems Incorporated Proprietary Information.
;	This listing is supplied under the terms of a license
;	agreement with TeleVideo Systems Incorporated and may
;	not be copied nor disclosed except in accordance with
;	the terms of that agreement.


	TITLE 802HBIOS.MAC--TELEVIDEO SYSTEM TS-802H CBIOS -- JUNE 22, 1983 

	.Z80
	CSEG
	.PHASE 0EE00H		; BIOS ENTRY POINT

;	************************************************
;	* THE FOLLOWING EQUATES ARE KEPT ISOLATED FROM *
;	* THE REST FOR PURPOSES OF MOVCPM GENERATION.  *
;	************************************************

CCP	EQU	$-CPMSIZ	; BASE OF CP/M
BDOS	EQU	CCP+CCPLEN+6	; ADDRESS OF BDOS ENTRY 
 	
	SUBTTL 802HEQU.MAC--EQUATE MODULE
	PAGE
	INCLUDE 802HEQU.MAC

	SUBTTL 802HBOOT.MAC--COLD/WARM BOOT MODULE
	PAGE
	INCLUDE 802HBOOT.MAC

	SUBTTL 802HCONS.MAC--CONSOLE I/O MODULE
	PAGE
	INCLUDE 802HCONS.MAC

	SUBTTL 802HHARD.MAC--HARD DISK I/O MODULE
	PAGE
	INCLUDE 802HHARD.MAC

	SUBTTL 802HFLOP.MAC--FLOPPY DISK I/O MODULE
	PAGE
	INCLUDE 802HFLOP.MAC

	SUBTTL	802HSUBS.MAC--SUBROUTINES MODULE
	PAGE
	INCLUDE 802HSUBS.MAC

	SUBTTL	802HDATA.MAC--DATA DEFINITION MODULE
	PAGE
	INCLUDE 802HDATA.MAC

	.DEPHASE 	
	END

; END OF 802HBIOS.MAC






 
